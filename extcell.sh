# user2のtoken取得
curl "http://localhost/testcell2/__token" \
-X POST -i \
-d "grant_type=password&username=user2&password=password2" \
-H "Content-Type: application/x-www-form-urlencoded"

{"access_token":"AR~GEpy4cqusm7b-FlD9_r-wWOR1MAYQrFWDLBTg6SZZ44deNrr9oah91Kg-7hZehtVLi01NTe0rUsuF3Y67vIshg","refresh_token_expires_in":86400,"refresh_token":"RR~-H1WPV_vpVqd8PmN91vkjNG_NHdYmupPttlXRuLovFaxwJmHtCgElBO7Z443oLsTf8rH_eEO6YALl4ropKaQCHDsgewQH-p_40tCvAhweVs","last_authenticated":1623904581615,"p_target":"http:\/\/localhost\/testcell2\/","scope":"root","failed_count":0,"token_type":"Bearer","expires_in":3600}

# user2としてUSer1のwebdavデータにアクセス
curl "http://localhost/testcell/userbox/WebDavContents" \
-X PROPFIND -i \
-d '<?xml version="1.0" encoding="utf-8"?><D:propfind xmlns:D="DAV:"><D:allprop/></D:propfind>' \
-H 'Depth:0' \
-H "Accept:application/json" -H "Authorization:Bearer PEFzc2VydGlvbiB4bWxucz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiIgSUQ9ImQ5YTYxOWIyLTEyM2ItNGFlMy1hZWFiLTVmMTI1NmZmMTVlMyIgSXNzdWVJbnN0YW50PSIyMDIxLTA2LTE3VDA4OjEyOjI1LjUyNloiIFZlcnNpb249IjIuMCI-PElzc3Vlcj5odHRwOi8vbG9jYWxob3N0L3Rlc3RjZWxsMi88L0lzc3Vlcj48U3ViamVjdD48TmFtZUlEPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwyLyN1c2VyMjwvTmFtZUlEPjxTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI-PFN1YmplY3RDb25maXJtYXRpb25EYXRhIE5vdE9uT3JBZnRlcj0iMjAyMS0wNi0xN1QwOToxMjoyNS41MjZaIiBSZWNpcGllbnQ9Imh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwvX190b2tlbiIvPjwvU3ViamVjdENvbmZpcm1hdGlvbj48L1N1YmplY3Q-PENvbmRpdGlvbnM-PEF1ZGllbmNlUmVzdHJpY3Rpb24-PEF1ZGllbmNlPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwvPC9BdWRpZW5jZT48QXVkaWVuY2UvPjwvQXVkaWVuY2VSZXN0cmljdGlvbj48L0NvbmRpdGlvbnM-PEF1dGhuU3RhdGVtZW50IEF1dGhuSW5zdGFudD0iMjAyMS0wNi0xN1QwODoxMjoyNS41MjZaIj48QXV0aG5Db250ZXh0PjxBdXRobkNvbnRleHRDbGFzc1JlZj51cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YWM6Y2xhc3NlczpQYXNzd29yZFByb3RlY3RlZFRyYW5zcG9ydDwvQXV0aG5Db250ZXh0Q2xhc3NSZWY-PC9BdXRobkNvbnRleHQ-PC9BdXRoblN0YXRlbWVudD48QXR0cmlidXRlU3RhdGVtZW50PjxBdHRyaWJ1dGUgTmFtZT0iUm9sZXMiIE5hbWVGb3JtYXQ9InVybjp4LXBlcnNvbml1bTp4bWxucyI-PEF0dHJpYnV0ZVZhbHVlPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwyL19fcm9sZS9fXy91c2Vycm9sZTI8L0F0dHJpYnV0ZVZhbHVlPjwvQXR0cmlidXRlPjxBdHRyaWJ1dGUgTmFtZT0iU2NvcGVzIj48QXR0cmlidXRlVmFsdWU-cm9vdDwvQXR0cmlidXRlVmFsdWU-PC9BdHRyaWJ1dGU-PC9BdHRyaWJ1dGVTdGF0ZW1lbnQ-PFNpZ25hdHVyZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI-PFNpZ25lZEluZm8-PENhbm9uaWNhbGl6YXRpb25NZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy14bWwtYzE0bi0yMDAxMDMxNSIvPjxTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjcnNhLXNoYTEiLz48UmVmZXJlbmNlIFVSST0iIj48VHJhbnNmb3Jtcz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiLz48L1RyYW5zZm9ybXM-PERpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNzaGExIi8-PERpZ2VzdFZhbHVlPkpQYjd5UW1hL0JSL01CaTFLRDg3b1MwYTZ2bz08L0RpZ2VzdFZhbHVlPjwvUmVmZXJlbmNlPjwvU2lnbmVkSW5mbz48U2lnbmF0dXJlVmFsdWU-dVVOTHdNaTVjSmxySlVBNi80VTl0STBqajlFaVdITU9mcG8rb3BtRGd3cFJ3S1lCRFRKTTJHd2l6Qkl4MW5RK0NBdWxjLzY3cEIrayYjMTM7CmRFZjlrVk9xcUg5WGl6MVc0YnRYR3R2RmtIRUpicmJrUW0zcVlFZmFUUXFkMDhrckw5UllZQVB2NmFRS09GNUgzOG96bno1UzJZcnAmIzEzOwpFMHk3SlJweFNBdXF1V3dLcitYNmdOMFUzTEE3R2c2aTFMelgwTGd2MElnWmErRVVtTElESXR3VWhXL1RLN25nb0FQV25CaHBPbmZWJiMxMzsKbDAxNHYwa0JmUTZiVkdGS2lxS1M2eGM3Vnp6YWp1NU5VZ0s2VlhRSDNEaTByQStHbHpEZnlZZHBiNkJGQUo3SnVSRFE3NjNUWk5mYSYjMTM7CmsvRU9vZVcxMkN3S1FTaDFXY3h5b1pPbGFlRVVaUS9HaHFNSUtnPT08L1NpZ25hdHVyZVZhbHVlPjxLZXlJbmZvPjxYNTA5RGF0YT48WDUwOVN1YmplY3ROYW1lPkNOPWxvY2FsaG9zdCxPVT1QZXJzb25pdW0uSU8gUHJvamVjdCxPPVBlcnNvbml1bS5JTyBQcm9qZWN0LEw9T0hUQUtVLFNUPVRPS1lPLEM9SlA8L1g1MDlTdWJqZWN0TmFtZT48WDUwOUNlcnRpZmljYXRlPk1JSURqRENDQW5RQ0FUd3dEUVlKS29aSWh2Y05BUUVGQlFBd2daWXhDekFKQmdOVkJBWVRBa3BRTVE0d0RBWURWUVFJREFWVWIydDUmIzEzOwpiekVVTUJJR0ExVUVDZ3dMUm5WcWFYUnpkU0JNZEdReEhEQWFCZ05WQkFzTUUxTnZZMmxoYkNCRGJHOTFaQ0JQWm1acFkyVXhHREFXJiMxMzsKQmdOVkJBTU1EMU52WTJsaGJDQkRiRzkxWkNCRFFURXBNQ2NHQ1NxR1NJYjNEUUVKQVJZYWJuTnpjQzFrWTBCdGJDNWpjM011Wm5WcSYjMTM7CmFYUnpkUzVqYjIwd0hoY05NVGd3TVRFM01EVXpNekUwV2hjTk5EZ3dNVEV3TURVek16RTBXakNCZ0RFTE1Ba0dBMVVFQmhNQ1NsQXgmIzEzOwpEakFNQmdOVkJBZ01CVlJQUzFsUE1ROHdEUVlEVlFRSERBWlBTRlJCUzFVeEhUQWJCZ05WQkFvTUZGQmxjbk52Ym1sMWJTNUpUeUJRJiMxMzsKY205cVpXTjBNUjB3R3dZRFZRUUxEQlJRWlhKemIyNXBkVzB1U1U4Z1VISnZhbVZqZERFU01CQUdBMVVFQXd3SmJHOWpZV3hvYjNOMCYjMTM7Ck1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBMXc2NXdMaWtWNWh5UUc5YnZTTHpjUlNQSHEzbFc0UkkmIzEzOwpNSzhVSThZMXg5c21HNEErUE9HT2dRdXpoaGpRNkVTamM5eXh1b3dtODc0VDNOdEJWOUZMLzZyT0tDMituaUlKVkZNckd6cXhwdTFKJiMxMzsKbHpLWFhuVVNDcFR1QUowZGxPc09hb01SWjhaODdzRVpxa01sWkJOVXFRRUU2S2lEbDZUbG53ZmZqb1Nucm1WeEVVK0dONXhabHhsRyYjMTM7CmUwdVErN0l3VFNDTjRkOEdxWThReXZlV2RvS3BZMFh5TkZ2M0EyVWdpNngraE91WnZxM1V0dTcrOWcrTWZBSG82SDlDcldhRWUzVlYmIzEzOwpFYVBXSFB1TzNEVnoxemEwai8rMy9XZ1FzUWl3TVdNaWx3V3YrWTJ1RzlmM1hVaTBZYWQreWVnNmlVM3Z4bjR1NWtvRnVmUVR3NnBWJiMxMzsKSCtEREFRSURBUUFCTUEwR0NTcUdTSWIzRFFFQkJRVUFBNElCQVFCYUhiTE5VYVRPdHVRMFBDQStkUW5rUGRTWnpJYU5McGE2a0pZRiYjMTM7CjZYT1dxZXlUVWxxVjZKUmt1L0RzRk5NSEI3ZnFlVEpUR1gxTjY2clpsMndwT2RIVUtrdklWT2FIT2lFMUVGRlk0MzJmY2xPL253UVUmIzEzOwp2REhBNEpoeWp2bENTd2NQZDZ4MkMrdllmMXJIeWg0Sy9uMEt1TXRLdVluT1dHNFN4N3JUNUxiL284U3EvZy90MXhRWmMvdDBVZ01QJiMxMzsKSjV3SW1GcHZUY1V0RGtYNzBGTm5tTGYrb1FsSlZ5eExmS1BsSy9oK0RFRURqN2xqOExHT1pVMDBSblRoME5PMFZyNHVTWWxUN0wrSSYjMTM7ClRDN1dad01sMGdxR20wdkN0M3JTWFRYT1UvYlhtbGhFQ2ZvemkrbFR3NXZQb0tWWWZKakwraEVZYmVwYWN5dEczaG1udXIvZ0pmS1k8L1g1MDlDZXJ0aWZpY2F0ZT48L1g1MDlEYXRhPjwvS2V5SW5mbz48L1NpZ25hdHVyZT48L0Fzc2VydGlvbj4"

# 401

# transcelltoken取得
curl "http://localhost/testcell2/__token" \
-X POST -i \
-d "grant_type=password&username=user2&password=password2&p_target=http://localhost/testcell/" \
-H "Content-Type: application/x-www-form-urlencoded"

# アクセス。
curl "http://localhost/testcell/userbox/WebDavContents" \
-X PROPFIND -i \
-d '<?xml version="1.0" encoding="utf-8"?><D:propfind xmlns:D="DAV:"><D:allprop/></D:propfind>' \
-H 'Depth:0' \
-H "Accept:application/json" -H "Authorization:Bearer PEFzc2VydGlvbiB4bWxucz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiIgSUQ9ImQ5YTYxOWIyLTEyM2ItNGFlMy1hZWFiLTVmMTI1NmZmMTVlMyIgSXNzdWVJbnN0YW50PSIyMDIxLTA2LTE3VDA4OjEyOjI1LjUyNloiIFZlcnNpb249IjIuMCI-PElzc3Vlcj5odHRwOi8vbG9jYWxob3N0L3Rlc3RjZWxsMi88L0lzc3Vlcj48U3ViamVjdD48TmFtZUlEPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwyLyN1c2VyMjwvTmFtZUlEPjxTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI-PFN1YmplY3RDb25maXJtYXRpb25EYXRhIE5vdE9uT3JBZnRlcj0iMjAyMS0wNi0xN1QwOToxMjoyNS41MjZaIiBSZWNpcGllbnQ9Imh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwvX190b2tlbiIvPjwvU3ViamVjdENvbmZpcm1hdGlvbj48L1N1YmplY3Q-PENvbmRpdGlvbnM-PEF1ZGllbmNlUmVzdHJpY3Rpb24-PEF1ZGllbmNlPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwvPC9BdWRpZW5jZT48QXVkaWVuY2UvPjwvQXVkaWVuY2VSZXN0cmljdGlvbj48L0NvbmRpdGlvbnM-PEF1dGhuU3RhdGVtZW50IEF1dGhuSW5zdGFudD0iMjAyMS0wNi0xN1QwODoxMjoyNS41MjZaIj48QXV0aG5Db250ZXh0PjxBdXRobkNvbnRleHRDbGFzc1JlZj51cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YWM6Y2xhc3NlczpQYXNzd29yZFByb3RlY3RlZFRyYW5zcG9ydDwvQXV0aG5Db250ZXh0Q2xhc3NSZWY-PC9BdXRobkNvbnRleHQ-PC9BdXRoblN0YXRlbWVudD48QXR0cmlidXRlU3RhdGVtZW50PjxBdHRyaWJ1dGUgTmFtZT0iUm9sZXMiIE5hbWVGb3JtYXQ9InVybjp4LXBlcnNvbml1bTp4bWxucyI-PEF0dHJpYnV0ZVZhbHVlPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwyL19fcm9sZS9fXy91c2Vycm9sZTI8L0F0dHJpYnV0ZVZhbHVlPjwvQXR0cmlidXRlPjxBdHRyaWJ1dGUgTmFtZT0iU2NvcGVzIj48QXR0cmlidXRlVmFsdWU-cm9vdDwvQXR0cmlidXRlVmFsdWU-PC9BdHRyaWJ1dGU-PC9BdHRyaWJ1dGVTdGF0ZW1lbnQ-PFNpZ25hdHVyZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI-PFNpZ25lZEluZm8-PENhbm9uaWNhbGl6YXRpb25NZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy14bWwtYzE0bi0yMDAxMDMxNSIvPjxTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjcnNhLXNoYTEiLz48UmVmZXJlbmNlIFVSST0iIj48VHJhbnNmb3Jtcz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiLz48L1RyYW5zZm9ybXM-PERpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNzaGExIi8-PERpZ2VzdFZhbHVlPkpQYjd5UW1hL0JSL01CaTFLRDg3b1MwYTZ2bz08L0RpZ2VzdFZhbHVlPjwvUmVmZXJlbmNlPjwvU2lnbmVkSW5mbz48U2lnbmF0dXJlVmFsdWU-dVVOTHdNaTVjSmxySlVBNi80VTl0STBqajlFaVdITU9mcG8rb3BtRGd3cFJ3S1lCRFRKTTJHd2l6Qkl4MW5RK0NBdWxjLzY3cEIrayYjMTM7CmRFZjlrVk9xcUg5WGl6MVc0YnRYR3R2RmtIRUpicmJrUW0zcVlFZmFUUXFkMDhrckw5UllZQVB2NmFRS09GNUgzOG96bno1UzJZcnAmIzEzOwpFMHk3SlJweFNBdXF1V3dLcitYNmdOMFUzTEE3R2c2aTFMelgwTGd2MElnWmErRVVtTElESXR3VWhXL1RLN25nb0FQV25CaHBPbmZWJiMxMzsKbDAxNHYwa0JmUTZiVkdGS2lxS1M2eGM3Vnp6YWp1NU5VZ0s2VlhRSDNEaTByQStHbHpEZnlZZHBiNkJGQUo3SnVSRFE3NjNUWk5mYSYjMTM7CmsvRU9vZVcxMkN3S1FTaDFXY3h5b1pPbGFlRVVaUS9HaHFNSUtnPT08L1NpZ25hdHVyZVZhbHVlPjxLZXlJbmZvPjxYNTA5RGF0YT48WDUwOVN1YmplY3ROYW1lPkNOPWxvY2FsaG9zdCxPVT1QZXJzb25pdW0uSU8gUHJvamVjdCxPPVBlcnNvbml1bS5JTyBQcm9qZWN0LEw9T0hUQUtVLFNUPVRPS1lPLEM9SlA8L1g1MDlTdWJqZWN0TmFtZT48WDUwOUNlcnRpZmljYXRlPk1JSURqRENDQW5RQ0FUd3dEUVlKS29aSWh2Y05BUUVGQlFBd2daWXhDekFKQmdOVkJBWVRBa3BRTVE0d0RBWURWUVFJREFWVWIydDUmIzEzOwpiekVVTUJJR0ExVUVDZ3dMUm5WcWFYUnpkU0JNZEdReEhEQWFCZ05WQkFzTUUxTnZZMmxoYkNCRGJHOTFaQ0JQWm1acFkyVXhHREFXJiMxMzsKQmdOVkJBTU1EMU52WTJsaGJDQkRiRzkxWkNCRFFURXBNQ2NHQ1NxR1NJYjNEUUVKQVJZYWJuTnpjQzFrWTBCdGJDNWpjM011Wm5WcSYjMTM7CmFYUnpkUzVqYjIwd0hoY05NVGd3TVRFM01EVXpNekUwV2hjTk5EZ3dNVEV3TURVek16RTBXakNCZ0RFTE1Ba0dBMVVFQmhNQ1NsQXgmIzEzOwpEakFNQmdOVkJBZ01CVlJQUzFsUE1ROHdEUVlEVlFRSERBWlBTRlJCUzFVeEhUQWJCZ05WQkFvTUZGQmxjbk52Ym1sMWJTNUpUeUJRJiMxMzsKY205cVpXTjBNUjB3R3dZRFZRUUxEQlJRWlhKemIyNXBkVzB1U1U4Z1VISnZhbVZqZERFU01CQUdBMVVFQXd3SmJHOWpZV3hvYjNOMCYjMTM7Ck1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBMXc2NXdMaWtWNWh5UUc5YnZTTHpjUlNQSHEzbFc0UkkmIzEzOwpNSzhVSThZMXg5c21HNEErUE9HT2dRdXpoaGpRNkVTamM5eXh1b3dtODc0VDNOdEJWOUZMLzZyT0tDMituaUlKVkZNckd6cXhwdTFKJiMxMzsKbHpLWFhuVVNDcFR1QUowZGxPc09hb01SWjhaODdzRVpxa01sWkJOVXFRRUU2S2lEbDZUbG53ZmZqb1Nucm1WeEVVK0dONXhabHhsRyYjMTM7CmUwdVErN0l3VFNDTjRkOEdxWThReXZlV2RvS3BZMFh5TkZ2M0EyVWdpNngraE91WnZxM1V0dTcrOWcrTWZBSG82SDlDcldhRWUzVlYmIzEzOwpFYVBXSFB1TzNEVnoxemEwai8rMy9XZ1FzUWl3TVdNaWx3V3YrWTJ1RzlmM1hVaTBZYWQreWVnNmlVM3Z4bjR1NWtvRnVmUVR3NnBWJiMxMzsKSCtEREFRSURBUUFCTUEwR0NTcUdTSWIzRFFFQkJRVUFBNElCQVFCYUhiTE5VYVRPdHVRMFBDQStkUW5rUGRTWnpJYU5McGE2a0pZRiYjMTM7CjZYT1dxZXlUVWxxVjZKUmt1L0RzRk5NSEI3ZnFlVEpUR1gxTjY2clpsMndwT2RIVUtrdklWT2FIT2lFMUVGRlk0MzJmY2xPL253UVUmIzEzOwp2REhBNEpoeWp2bENTd2NQZDZ4MkMrdllmMXJIeWg0Sy9uMEt1TXRLdVluT1dHNFN4N3JUNUxiL284U3EvZy90MXhRWmMvdDBVZ01QJiMxMzsKSjV3SW1GcHZUY1V0RGtYNzBGTm5tTGYrb1FsSlZ5eExmS1BsSy9oK0RFRURqN2xqOExHT1pVMDBSblRoME5PMFZyNHVTWWxUN0wrSSYjMTM7ClRDN1dad01sMGdxR20wdkN0M3JTWFRYT1UvYlhtbGhFQ2ZvemkrbFR3NXZQb0tWWWZKakwraEVZYmVwYWN5dEczaG1udXIvZ0pmS1k8L1g1MDlDZXJ0aWZpY2F0ZT48L1g1MDlEYXRhPjwvS2V5SW5mbz48L1NpZ25hdHVyZT48L0Fzc2VydGlvbj4"

HTTP/1.1 403
Server: nginx/1.14.2
Date: Thu, 17 Jun 2021 08:14:38 GMT
Content-Type: application/json
Content-Length: 90
Connection: keep-alive
X-Personium-Version: 1.7.21

{"code":"PR403-AU-0002","message":{"lang":"en","value":"Necessary privilege is lacking."}}wadakeishinoMacBook-Pro:scripts wadakeishi$


# relation登録、relationへのロールアサイン
curl "http://localhost/testcell/__ctl/Relation" \
-X POST -i \
-d '{ "Name":"userExtRelation", "_Box.Name": "userbox"}' \
-H "Accept:application/json" -H "Authorization:Bearer personiumio"

curl "http://localhost/testcell/__ctl/Relation(Name='userExtRelation',_Box.Name='userbox')/\$links/_Role" \
-X POST -i  \
-d "{\"uri\":\"http://localhost/testcell/__ctl/Role(Name='userrole',_Box.Name='userbox')\"}" \
-H "Accept:application/json" -H "Authorization:Bearer personiumio"

# extcell(testcell2)登録
curl "http://localhost/testcell/__ctl/ExtCell" \
-X POST -i \
-d '{"Url":"http://localhost/testcell2/"}' \
-H "Accept:application/json" -H "Authorization:Bearer personiumio"

#extcell(testcell2)へのrelationアサイン
curl "http://localhost/testcell/__ctl/ExtCell('http%3A%2F%2Flocalhost%2Ftestcell2%2F')/\$links/_Relation" \
-X POST -i  \
-d "{\"uri\":\"http://localhost/testcell/__ctl/Relation(Name='userExtRelation',_Box.Name='userbox')\"}" \
-H "Accept:application/json" -H "Authorization:Bearer personiumio"

#アクセス
curl "http://localhost/testcell/userbox/WebDavContents" \
-X PROPFIND -i \
-d '<?xml version="1.0" encoding="utf-8"?><D:propfind xmlns:D="DAV:"><D:allprop/></D:propfind>' \
-H 'Depth:0' \
-H "Accept:application/json" -H "Authorization:Bearer PEFzc2VydGlvbiB4bWxucz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiIgSUQ9ImQ5YTYxOWIyLTEyM2ItNGFlMy1hZWFiLTVmMTI1NmZmMTVlMyIgSXNzdWVJbnN0YW50PSIyMDIxLTA2LTE3VDA4OjEyOjI1LjUyNloiIFZlcnNpb249IjIuMCI-PElzc3Vlcj5odHRwOi8vbG9jYWxob3N0L3Rlc3RjZWxsMi88L0lzc3Vlcj48U3ViamVjdD48TmFtZUlEPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwyLyN1c2VyMjwvTmFtZUlEPjxTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI-PFN1YmplY3RDb25maXJtYXRpb25EYXRhIE5vdE9uT3JBZnRlcj0iMjAyMS0wNi0xN1QwOToxMjoyNS41MjZaIiBSZWNpcGllbnQ9Imh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwvX190b2tlbiIvPjwvU3ViamVjdENvbmZpcm1hdGlvbj48L1N1YmplY3Q-PENvbmRpdGlvbnM-PEF1ZGllbmNlUmVzdHJpY3Rpb24-PEF1ZGllbmNlPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwvPC9BdWRpZW5jZT48QXVkaWVuY2UvPjwvQXVkaWVuY2VSZXN0cmljdGlvbj48L0NvbmRpdGlvbnM-PEF1dGhuU3RhdGVtZW50IEF1dGhuSW5zdGFudD0iMjAyMS0wNi0xN1QwODoxMjoyNS41MjZaIj48QXV0aG5Db250ZXh0PjxBdXRobkNvbnRleHRDbGFzc1JlZj51cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YWM6Y2xhc3NlczpQYXNzd29yZFByb3RlY3RlZFRyYW5zcG9ydDwvQXV0aG5Db250ZXh0Q2xhc3NSZWY-PC9BdXRobkNvbnRleHQ-PC9BdXRoblN0YXRlbWVudD48QXR0cmlidXRlU3RhdGVtZW50PjxBdHRyaWJ1dGUgTmFtZT0iUm9sZXMiIE5hbWVGb3JtYXQ9InVybjp4LXBlcnNvbml1bTp4bWxucyI-PEF0dHJpYnV0ZVZhbHVlPmh0dHA6Ly9sb2NhbGhvc3QvdGVzdGNlbGwyL19fcm9sZS9fXy91c2Vycm9sZTI8L0F0dHJpYnV0ZVZhbHVlPjwvQXR0cmlidXRlPjxBdHRyaWJ1dGUgTmFtZT0iU2NvcGVzIj48QXR0cmlidXRlVmFsdWU-cm9vdDwvQXR0cmlidXRlVmFsdWU-PC9BdHRyaWJ1dGU-PC9BdHRyaWJ1dGVTdGF0ZW1lbnQ-PFNpZ25hdHVyZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI-PFNpZ25lZEluZm8-PENhbm9uaWNhbGl6YXRpb25NZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy14bWwtYzE0bi0yMDAxMDMxNSIvPjxTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjcnNhLXNoYTEiLz48UmVmZXJlbmNlIFVSST0iIj48VHJhbnNmb3Jtcz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiLz48L1RyYW5zZm9ybXM-PERpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNzaGExIi8-PERpZ2VzdFZhbHVlPkpQYjd5UW1hL0JSL01CaTFLRDg3b1MwYTZ2bz08L0RpZ2VzdFZhbHVlPjwvUmVmZXJlbmNlPjwvU2lnbmVkSW5mbz48U2lnbmF0dXJlVmFsdWU-dVVOTHdNaTVjSmxySlVBNi80VTl0STBqajlFaVdITU9mcG8rb3BtRGd3cFJ3S1lCRFRKTTJHd2l6Qkl4MW5RK0NBdWxjLzY3cEIrayYjMTM7CmRFZjlrVk9xcUg5WGl6MVc0YnRYR3R2RmtIRUpicmJrUW0zcVlFZmFUUXFkMDhrckw5UllZQVB2NmFRS09GNUgzOG96bno1UzJZcnAmIzEzOwpFMHk3SlJweFNBdXF1V3dLcitYNmdOMFUzTEE3R2c2aTFMelgwTGd2MElnWmErRVVtTElESXR3VWhXL1RLN25nb0FQV25CaHBPbmZWJiMxMzsKbDAxNHYwa0JmUTZiVkdGS2lxS1M2eGM3Vnp6YWp1NU5VZ0s2VlhRSDNEaTByQStHbHpEZnlZZHBiNkJGQUo3SnVSRFE3NjNUWk5mYSYjMTM7CmsvRU9vZVcxMkN3S1FTaDFXY3h5b1pPbGFlRVVaUS9HaHFNSUtnPT08L1NpZ25hdHVyZVZhbHVlPjxLZXlJbmZvPjxYNTA5RGF0YT48WDUwOVN1YmplY3ROYW1lPkNOPWxvY2FsaG9zdCxPVT1QZXJzb25pdW0uSU8gUHJvamVjdCxPPVBlcnNvbml1bS5JTyBQcm9qZWN0LEw9T0hUQUtVLFNUPVRPS1lPLEM9SlA8L1g1MDlTdWJqZWN0TmFtZT48WDUwOUNlcnRpZmljYXRlPk1JSURqRENDQW5RQ0FUd3dEUVlKS29aSWh2Y05BUUVGQlFBd2daWXhDekFKQmdOVkJBWVRBa3BRTVE0d0RBWURWUVFJREFWVWIydDUmIzEzOwpiekVVTUJJR0ExVUVDZ3dMUm5WcWFYUnpkU0JNZEdReEhEQWFCZ05WQkFzTUUxTnZZMmxoYkNCRGJHOTFaQ0JQWm1acFkyVXhHREFXJiMxMzsKQmdOVkJBTU1EMU52WTJsaGJDQkRiRzkxWkNCRFFURXBNQ2NHQ1NxR1NJYjNEUUVKQVJZYWJuTnpjQzFrWTBCdGJDNWpjM011Wm5WcSYjMTM7CmFYUnpkUzVqYjIwd0hoY05NVGd3TVRFM01EVXpNekUwV2hjTk5EZ3dNVEV3TURVek16RTBXakNCZ0RFTE1Ba0dBMVVFQmhNQ1NsQXgmIzEzOwpEakFNQmdOVkJBZ01CVlJQUzFsUE1ROHdEUVlEVlFRSERBWlBTRlJCUzFVeEhUQWJCZ05WQkFvTUZGQmxjbk52Ym1sMWJTNUpUeUJRJiMxMzsKY205cVpXTjBNUjB3R3dZRFZRUUxEQlJRWlhKemIyNXBkVzB1U1U4Z1VISnZhbVZqZERFU01CQUdBMVVFQXd3SmJHOWpZV3hvYjNOMCYjMTM7Ck1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBMXc2NXdMaWtWNWh5UUc5YnZTTHpjUlNQSHEzbFc0UkkmIzEzOwpNSzhVSThZMXg5c21HNEErUE9HT2dRdXpoaGpRNkVTamM5eXh1b3dtODc0VDNOdEJWOUZMLzZyT0tDMituaUlKVkZNckd6cXhwdTFKJiMxMzsKbHpLWFhuVVNDcFR1QUowZGxPc09hb01SWjhaODdzRVpxa01sWkJOVXFRRUU2S2lEbDZUbG53ZmZqb1Nucm1WeEVVK0dONXhabHhsRyYjMTM7CmUwdVErN0l3VFNDTjRkOEdxWThReXZlV2RvS3BZMFh5TkZ2M0EyVWdpNngraE91WnZxM1V0dTcrOWcrTWZBSG82SDlDcldhRWUzVlYmIzEzOwpFYVBXSFB1TzNEVnoxemEwai8rMy9XZ1FzUWl3TVdNaWx3V3YrWTJ1RzlmM1hVaTBZYWQreWVnNmlVM3Z4bjR1NWtvRnVmUVR3NnBWJiMxMzsKSCtEREFRSURBUUFCTUEwR0NTcUdTSWIzRFFFQkJRVUFBNElCQVFCYUhiTE5VYVRPdHVRMFBDQStkUW5rUGRTWnpJYU5McGE2a0pZRiYjMTM7CjZYT1dxZXlUVWxxVjZKUmt1L0RzRk5NSEI3ZnFlVEpUR1gxTjY2clpsMndwT2RIVUtrdklWT2FIT2lFMUVGRlk0MzJmY2xPL253UVUmIzEzOwp2REhBNEpoeWp2bENTd2NQZDZ4MkMrdllmMXJIeWg0Sy9uMEt1TXRLdVluT1dHNFN4N3JUNUxiL284U3EvZy90MXhRWmMvdDBVZ01QJiMxMzsKSjV3SW1GcHZUY1V0RGtYNzBGTm5tTGYrb1FsSlZ5eExmS1BsSy9oK0RFRURqN2xqOExHT1pVMDBSblRoME5PMFZyNHVTWWxUN0wrSSYjMTM7ClRDN1dad01sMGdxR20wdkN0M3JTWFRYT1UvYlhtbGhFQ2ZvemkrbFR3NXZQb0tWWWZKakwraEVZYmVwYWN5dEczaG1udXIvZ0pmS1k8L1g1MDlDZXJ0aWZpY2F0ZT48L1g1MDlEYXRhPjwvS2V5SW5mbz48L1NpZ25hdHVyZT48L0Fzc2VydGlvbj4"


HTTP/1.1 207
Server: nginx/1.14.2
Date: Thu, 17 Jun 2021 08:29:14 GMT
Content-Type: application/xml
Content-Length: 517
Connection: keep-alive
ETag: "8-1623831229980"
X-Personium-Version: 1.7.21

<multistatus xmlns="DAV:">
    <response>
        <href>http://localhost/testcell/userbox/WebDavContents</href>
        <propstat>
            <prop>
                <creationdate>2021-06-16T08:13:49.980+0000</creationdate>
                <getlastmodified>Wed, 16 Jun 2021 08:13:49 GMT</getlastmodified>
                <resourcetype>
                    <collection/>
                </resourcetype>
            </prop>
            <status>HTTP/1.1 200 OK</status>
        </propstat>
    </response>
</multistatus>
